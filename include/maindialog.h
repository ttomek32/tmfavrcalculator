#ifndef MAINDIALOG_H
#define MAINDIALOG_H

#include <QDialog>
#include <AVRDudeConfParser.h>

namespace Ui {
class MainDialog;
}

class MainDialog : public QDialog
{
    Q_OBJECT

protected:
    AVRDudeConfParser *AVRDudeConf;     //Parser pliku konfiguracyjnego AVRDude
    
public:
    explicit MainDialog(QWidget *parent = 0);
    void HideAdvancedTabs(bool);     //Ukryj zak³adki z opcjami zaawansowanymi

    ~MainDialog();

protected:
    void FillProgrammerCB();          //Wype³nij listê dostêpnych programatorów
    void FillPortCB();                //Wype³nij listê portów
    void FillMCUType();               //Wype³nij listê mikrokontrolerów

signals:
 void SetAVRDudePath(QString);        //Ustaw œcie¿kê w zak³adce SetUp do AVRDude
 void SetFLASHFile(QString);          //Ustaw œcie¿kê do pliku FLASH we zak³adkach
 void SetEEPROMFile(QString);         //Ustaw œcie¿kê do pliku EEPROM we wszystkich zak³adkach
 void SetSimplifierViewChBox(bool);   //Ustaw checkbox widoku uproszczonego w zak³adce Setup
 void SetAVRDudeWindowOnError(bool);  //Ustaw checkbox wyœwietlania okna AVRD Dude w przypadku b³êdu
 void SetAVRDudeCMDLine(bool);        //Ustaw checkbox wyœwietlania linii polecenia AVR Dude

private slots:
    //Z okienka programowanie uproszczone
    void ProgrammerChanged(QString);     //U¿ytkownik wybra³ typ programatora
    void PortChanged(QString);           //U¿ytkownik wybra³ typ portu
    void MCUChanged(QString);            //U¿ytkownik wybra³ typ mikrokontrolera
    void TestConnection();               //SprawdŸ po³¹czenie z MCU i przy okazji sygnaturê

    void AVRDudeSetPath();            //Ustaw œcie¿kê do programu AVRDude
    void OpenFLASHFileDlg();          //Ustaw œcie¿kê do pliku z FLASH
    void OpenEEPROMFileDlg();         //Ustaw œcie¿kê do pliku z EEPROM
    //Z okienka SetUp
    void SetupShowSimplifiedView(int);     //Checkbox pokazuj¹cy tylko widok uproszczony
    void SetupShowAVDDudeWindow(int);      //Checkbox - poka¿ okno AVRDude tylko jeœli wyst¹pi³ b³¹d
    void SetupShowAVRDudeCmd(int);         //Poka¿ wygenerowane polecenie AVRDude

    //Programownaie
    void SavePathToAVRDude(QString);       //Zapisz œcie¿kê do AVRDude

    //Inne
    void SavePathToFLASHFile(QString);     //Zapisz w rejestrze œcie¿kê do pliku FLASH
    void SavePathToEEPROMFile(QString);    //Zapisz w rejestrze œcie¿kê do pliku EEPROM

    void ShowAVRDudeCmdLineParams();       //Wyœwietla na dole w okienku liniê parametrów AVRDude

private:
    Ui::MainDialog *ui;

  //Funkcje zwracaj¹ce poszczególne elementy linii polecenia AVRDude
    QString GetMCUAsAVRDudeParam();         //Zwróæ typ MCU jako parametr
    QString GetProgrammerAsAVRDudeParam();  //Zwróæ typ programatora jako parametr
    QString GetPortAsAVRDudeParam();        //Zwróæ typ wybranego portu jako parametr
};

#endif // MAINDIALOG_H
